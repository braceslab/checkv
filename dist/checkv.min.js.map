{"version":3,"sources":["node_modules/browser-pack/_prelude.js","_main.js","lib/Check.js","lib/lib.js","lib/validate/array.js","lib/validate/function.js","lib/validate/index.js","lib/validate/number.js","lib/validate/object.js","lib/validate/string.js","node_modules/deep-equal/index.js","node_modules/deep-equal/lib/is_arguments.js","node_modules/deep-equal/lib/keys.js"],"names":[],"mappings":"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","file":"checkv.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\n\nconst lib = require('./lib/lib')\nconst Check = require('./lib/Check')\n\nconst check = new Check()\ncheck.lib = lib\n\nmodule.exports = check\n\nwindow.checkv=check","'use strict'\n\nconst validate = require('./validate/')\n\n// const log = require('log-segment')\n// log.add({segments: lib.checkv.log})\n\n/**\n * Rules\n\n */\n\nconst Check = function () {\n  /**\n   * @param {*} value\n   * @param {Rules} rules\n   * @return boolean\n   */\n  function check (value, rules) {\n    // check rules\n    if (!rules || Object.keys(rules).length < 1) {\n      console.log('chekcv', 'no rules checking value', value)\n      return true\n    }\n\n    // apply rules\n    let _match = true\n    for (const rule in rules) {\n      if (\n        !validate.number[rule] &&\n        !validate.string[rule] &&\n        !validate.array[rule] &&\n        !validate.object[rule] &&\n        !validate.function[rule]\n      ) {\n        return __unknownRule(value, rule)\n      }\n      let _compare = rules[rule]\n\n      switch (rule) {\n        // number cases\n        case 'isNumber':\n        case 'isInteger':\n        case 'isPositive':\n          _match = _compare === validate.number[rule](value)\n          break\n        case 'isEqual':\n        case 'isGreater':\n        case 'isLess':\n        case 'isGreaterOrEqual':\n        case 'isLessOrEqual':\n          _match = validate.number[rule](value, _compare)\n          break\n        // string cases\n        case 'isString':\n        case 'isEmail':\n        case 'isPinCode':\n        case 'isPhone':\n        case 'isHex':\n          _match = _compare === validate.string[rule](value)\n          break\n        case 'isShorter':\n        case 'isLonger':\n          _match = validate.string[rule](value, _compare)\n          break\n        // object cases\n        case 'isSet':\n        case 'isObject':\n        case 'isArray':\n          _match = _compare === validate.object[rule](value)\n          break\n        case 'hasProperties':\n        case 'isExactly':\n        case 'isEnum':\n          _match = validate.object[rule](value, _compare)\n          break\n        // array cases\n        case 'isIn':\n          _match = validate.array[rule](value, _compare)\n          break\n        // function cases\n        case 'isFunction':\n          _match = _compare === validate.function[rule](value)\n          break\n        default:\n          return __unknownRule(value, rule)\n      }\n      if (!_match) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  function __unknownRule (value, rule) {\n    console.warn('checkv', 'unknow rule', rule, 'checking value', value)\n    return false\n  }\n\n  return check\n}\n\nmodule.exports = Check\n","'use strict'\n\nconst lib = {\n  checkv: {\n    log: {'checkv': { color: 'white' }}\n  }\n}\n\nmodule.exports = lib\n","'use strict'\n\nconst array = {\n  isIn: function (value, values) {\n    try {\n      return values.indexOf(value) !== -1\n    } catch (e) {\n      return false\n    }\n  }\n}\n\nmodule.exports = array\n","'use strict'\n\nconst f = {\n  isFunction: function (value) {\n    return typeof value === 'function'\n  }\n}\n\nmodule.exports = f\n","'use strict'\n\nconst validate = {\n  function: require('./function'),\n  number: require('./number'),\n  string: require('./string'),\n  object: require('./object'),\n  array: require('./array')\n}\n\nmodule.exports = validate\n","'use strict'\n\nconst number = {\n  isNumber: function (value) {\n    return typeof value === 'number'\n  },\n  isInteger: function (value) {\n    return number.isNumber(value) && Number.isInteger(value)\n  },\n  isPositive: function (value) {\n    return number.isNumber(value) && value >= 0\n  },\n  isEqual: function (value, to) {\n    return number.isNumber(value) && value === to\n  },\n  isGreater: function (value, than) {\n    return number.isNumber(value) && value > than\n  },\n  isLess: function (value, than) {\n    return number.isNumber(value) && value < than\n  },\n  isGreaterOrEqual: function (value, than) {\n    return number.isNumber(value) && value >= than\n  },\n  isLessOrEqual: function (value, than) {\n    return number.isNumber(value) && value <= than\n  }\n}\n\nmodule.exports = number\n","'use strict'\nconst eqeqeq = require('deep-equal')\n\nconst object = {\n  isSet: function (value) {\n    return value !== null && value !== undefined\n  },\n  isObject: function (value) {\n    return value && typeof value === 'object'\n  },\n  isArray: function (value) {\n    return value instanceof Array\n  },\n  isEnum: function (value, _enum) {\n    try {\n      for (let key in _enum) {\n        if (_enum[key] === value) {\n          return true\n        }\n      }\n    } catch (e) {}\n    return false\n  },\n  /**\n   * implicitly check isObject\n   */\n  hasProperties: function (value, properties) {\n    if (!properties) {\n      console.warn('checkv', 'object.hasProperties, missing properties')\n    }\n    if (!properties || !object.isObject(value)) {\n      return false\n    }\n    for (let i = 0; i < properties.length; i++) {\n      if (!value.hasOwnProperty(properties[i])) {\n        return false\n      }\n    }\n    return true\n  },\n  /**\n   * @todo use deep-strict-equal?\n   */\n  isExactly: function (value, to) {\n    if (typeof to !== typeof value) {\n      return false\n    }\n\n    if (value === null && to === null) {\n      return true\n    }\n\n    if (typeof to === 'object') {\n      if (to.constructor.name !== value.constructor.name) {\n        return false\n      }\n\n      try {\n        if (value instanceof Error && to instanceof Error) {\n          return value.code === to.code || value.code === to.message || value.message === to.code\n        }\n      } catch (e) {\n        return false\n      }\n\n      return eqeqeq(value, to, {strict: true})\n    }\n\n    // primitives\n    return value === to\n  }\n}\n\nmodule.exports = object\n","'use strict'\n\nconst string = {\n  isString: function (value) {\n    return typeof value === 'string'\n  },\n  isShorter: function (value, than) {\n    return string.isString(value) && value.length < than\n  },\n  isLonger: function (value, than) {\n    return string.isString(value) && value.length > than\n  },\n  isEmail: function (value) {\n    if (!value || !string.isString(value)) {\n      return false\n    }\n    // eslint-disable-next-line\n    return (/^[\\w\\.-]+@[\\w\\.-]+$/i).test(value)\n  },\n  isPinCode: function (value) {\n    if (!value || !string.isString(value)) {\n      return false\n    }\n    return (/^[\\d]+$/).test(value)\n  },\n  isPhone: function (value) {\n    if (!value || !string.isString(value) || !string.isLonger(value, 2)) {\n      return false\n    }\n    if ((/^\\+?[\\d .]+$/).test(value)) {\n      return value.replace(/[+ .]/g, '').length > 2\n    }\n    return false\n  },\n  isHex: function (value) {\n    if (!value || !string.isString(value)) {\n      return false\n    }\n    return (/^[\\da-f]+$/i).test(value)\n  }\n}\n\nmodule.exports = string\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfbWFpbi5qcyIsImxpYi9DaGVjay5qcyIsImxpYi9saWIuanMiLCJsaWIvdmFsaWRhdGUvYXJyYXkuanMiLCJsaWIvdmFsaWRhdGUvZnVuY3Rpb24uanMiLCJsaWIvdmFsaWRhdGUvaW5kZXguanMiLCJsaWIvdmFsaWRhdGUvbnVtYmVyLmpzIiwibGliL3ZhbGlkYXRlL29iamVjdC5qcyIsImxpYi92YWxpZGF0ZS9zdHJpbmcuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9kZWVwLWVxdWFsL2xpYi9pc19hcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvZGVlcC1lcXVhbC9saWIva2V5cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLGFBRUEsR0FBTSxLQUFNLFFBQVEsV0FBUixDQUFaLENBQ0EsR0FBTSxPQUFRLFFBQVEsYUFBUixDQUFkLENBRUEsR0FBTSxPQUFRLEdBQUksTUFBbEIsQ0FDQSxNQUFNLEdBQU4sQ0FBWSxHQUFaLENBRUEsT0FBTyxPQUFQLENBQWlCLEtBQWpCLENBRUEsT0FBTyxNQUFQLENBQWMsS0FBZDs7O0FDVkEsYUFFQSxHQUFNLFVBQVcsUUFBUSxhQUFSLENBQWpCLENBVUEsR0FBTSxPQUFRLFFBQVIsTUFBUSxFQUFZLENBTXhCLFFBQVMsTUFBVCxDQUFnQixLQUFoQixDQUF1QixLQUF2QixDQUE4QixDQUU1QixHQUFJLENBQUMsS0FBRCxFQUFVLE9BQU8sSUFBUCxDQUFZLEtBQVosRUFBbUIsTUFBbkIsQ0FBNEIsQ0FBMUMsQ0FBNkMsQ0FDM0MsUUFBUSxHQUFSLENBQVksUUFBWixDQUFzQix5QkFBdEIsQ0FBaUQsS0FBakQsRUFDQSxNQUFPLEtBQ1IsQ0FHRCxHQUFJLFFBQVMsSUFBYixDQUNBLElBQUssR0FBTSxLQUFYLEdBQW1CLE1BQW5CLENBQTBCLENBQ3hCLEdBQ0UsQ0FBQyxT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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGxpYiA9IHJlcXVpcmUoJy4vbGliL2xpYicpXG5jb25zdCBDaGVjayA9IHJlcXVpcmUoJy4vbGliL0NoZWNrJylcblxuY29uc3QgY2hlY2sgPSBuZXcgQ2hlY2soKVxuY2hlY2subGliID0gbGliXG5cbm1vZHVsZS5leHBvcnRzID0gY2hlY2tcblxud2luZG93LmNoZWNrdj1jaGVjayIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCB2YWxpZGF0ZSA9IHJlcXVpcmUoJy4vdmFsaWRhdGUvJylcblxuLy8gY29uc3QgbG9nID0gcmVxdWlyZSgnbG9nLXNlZ21lbnQnKVxuLy8gbG9nLmFkZCh7c2VnbWVudHM6IGxpYi5jaGVja3YubG9nfSlcblxuLyoqXG4gKiBSdWxlc1xuXG4gKi9cblxuY29uc3QgQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7UnVsZXN9IHJ1bGVzXG4gICAqIEByZXR1cm4gYm9vbGVhblxuICAgKi9cbiAgZnVuY3Rpb24gY2hlY2sgKHZhbHVlLCBydWxlcykge1xuICAgIC8vIGNoZWNrIHJ1bGVzXG4gICAgaWYgKCFydWxlcyB8fCBPYmplY3Qua2V5cyhydWxlcykubGVuZ3RoIDwgMSkge1xuICAgICAgY29uc29sZS5sb2coJ2NoZWtjdicsICdubyBydWxlcyBjaGVja2luZyB2YWx1ZScsIHZhbHVlKVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICAvLyBhcHBseSBydWxlc1xuICAgIGxldCBfbWF0Y2ggPSB0cnVlXG4gICAgZm9yIChjb25zdCBydWxlIGluIHJ1bGVzKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF2YWxpZGF0ZS5udW1iZXJbcnVsZV0gJiZcbiAgICAgICAgIXZhbGlkYXRlLnN0cmluZ1tydWxlXSAmJlxuICAgICAgICAhdmFsaWRhdGUuYXJyYXlbcnVsZV0gJiZcbiAgICAgICAgIXZhbGlkYXRlLm9iamVjdFtydWxlXSAmJlxuICAgICAgICAhdmFsaWRhdGUuZnVuY3Rpb25bcnVsZV1cbiAgICAgICkge1xuICAgICAgICByZXR1cm4gX191bmtub3duUnVsZSh2YWx1ZSwgcnVsZSlcbiAgICAgIH1cbiAgICAgIGxldCBfY29tcGFyZSA9IHJ1bGVzW3J1bGVdXG5cbiAgICAgIHN3aXRjaCAocnVsZSkge1xuICAgICAgICAvLyBudW1iZXIgY2FzZXNcbiAgICAgICAgY2FzZSAnaXNOdW1iZXInOlxuICAgICAgICBjYXNlICdpc0ludGVnZXInOlxuICAgICAgICBjYXNlICdpc1Bvc2l0aXZlJzpcbiAgICAgICAgICBfbWF0Y2ggPSBfY29tcGFyZSA9PT0gdmFsaWRhdGUubnVtYmVyW3J1bGVdKHZhbHVlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2lzRXF1YWwnOlxuICAgICAgICBjYXNlICdpc0dyZWF0ZXInOlxuICAgICAgICBjYXNlICdpc0xlc3MnOlxuICAgICAgICBjYXNlICdpc0dyZWF0ZXJPckVxdWFsJzpcbiAgICAgICAgY2FzZSAnaXNMZXNzT3JFcXVhbCc6XG4gICAgICAgICAgX21hdGNoID0gdmFsaWRhdGUubnVtYmVyW3J1bGVdKHZhbHVlLCBfY29tcGFyZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICAvLyBzdHJpbmcgY2FzZXNcbiAgICAgICAgY2FzZSAnaXNTdHJpbmcnOlxuICAgICAgICBjYXNlICdpc0VtYWlsJzpcbiAgICAgICAgY2FzZSAnaXNQaW5Db2RlJzpcbiAgICAgICAgY2FzZSAnaXNQaG9uZSc6XG4gICAgICAgIGNhc2UgJ2lzSGV4JzpcbiAgICAgICAgICBfbWF0Y2ggPSBfY29tcGFyZSA9PT0gdmFsaWRhdGUuc3RyaW5nW3J1bGVdKHZhbHVlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2lzU2hvcnRlcic6XG4gICAgICAgIGNhc2UgJ2lzTG9uZ2VyJzpcbiAgICAgICAgICBfbWF0Y2ggPSB2YWxpZGF0ZS5zdHJpbmdbcnVsZV0odmFsdWUsIF9jb21wYXJlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIC8vIG9iamVjdCBjYXNlc1xuICAgICAgICBjYXNlICdpc1NldCc6XG4gICAgICAgIGNhc2UgJ2lzT2JqZWN0JzpcbiAgICAgICAgY2FzZSAnaXNBcnJheSc6XG4gICAgICAgICAgX21hdGNoID0gX2NvbXBhcmUgPT09IHZhbGlkYXRlLm9iamVjdFtydWxlXSh2YWx1ZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdoYXNQcm9wZXJ0aWVzJzpcbiAgICAgICAgY2FzZSAnaXNFeGFjdGx5JzpcbiAgICAgICAgY2FzZSAnaXNFbnVtJzpcbiAgICAgICAgICBfbWF0Y2ggPSB2YWxpZGF0ZS5vYmplY3RbcnVsZV0odmFsdWUsIF9jb21wYXJlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIC8vIGFycmF5IGNhc2VzXG4gICAgICAgIGNhc2UgJ2lzSW4nOlxuICAgICAgICAgIF9tYXRjaCA9IHZhbGlkYXRlLmFycmF5W3J1bGVdKHZhbHVlLCBfY29tcGFyZSlcbiAgICAgICAgICBicmVha1xuICAgICAgICAvLyBmdW5jdGlvbiBjYXNlc1xuICAgICAgICBjYXNlICdpc0Z1bmN0aW9uJzpcbiAgICAgICAgICBfbWF0Y2ggPSBfY29tcGFyZSA9PT0gdmFsaWRhdGUuZnVuY3Rpb25bcnVsZV0odmFsdWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gX191bmtub3duUnVsZSh2YWx1ZSwgcnVsZSlcbiAgICAgIH1cbiAgICAgIGlmICghX21hdGNoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBmdW5jdGlvbiBfX3Vua25vd25SdWxlICh2YWx1ZSwgcnVsZSkge1xuICAgIGNvbnNvbGUud2FybignY2hlY2t2JywgJ3Vua25vdyBydWxlJywgcnVsZSwgJ2NoZWNraW5nIHZhbHVlJywgdmFsdWUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gY2hlY2tcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDaGVja1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGxpYiA9IHtcbiAgY2hlY2t2OiB7XG4gICAgbG9nOiB7J2NoZWNrdic6IHsgY29sb3I6ICd3aGl0ZScgfX1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpYlxuIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGFycmF5ID0ge1xuICBpc0luOiBmdW5jdGlvbiAodmFsdWUsIHZhbHVlcykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdmFsdWVzLmluZGV4T2YodmFsdWUpICE9PSAtMVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFycmF5XG4iLCIndXNlIHN0cmljdCdcblxuY29uc3QgZiA9IHtcbiAgaXNGdW5jdGlvbjogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJ1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZlxuIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IHZhbGlkYXRlID0ge1xuICBmdW5jdGlvbjogcmVxdWlyZSgnLi9mdW5jdGlvbicpLFxuICBudW1iZXI6IHJlcXVpcmUoJy4vbnVtYmVyJyksXG4gIHN0cmluZzogcmVxdWlyZSgnLi9zdHJpbmcnKSxcbiAgb2JqZWN0OiByZXF1aXJlKCcuL29iamVjdCcpLFxuICBhcnJheTogcmVxdWlyZSgnLi9hcnJheScpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGVcbiIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBudW1iZXIgPSB7XG4gIGlzTnVtYmVyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJ1xuICB9LFxuICBpc0ludGVnZXI6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIE51bWJlci5pc0ludGVnZXIodmFsdWUpXG4gIH0sXG4gIGlzUG9zaXRpdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlID49IDBcbiAgfSxcbiAgaXNFcXVhbDogZnVuY3Rpb24gKHZhbHVlLCB0bykge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlID09PSB0b1xuICB9LFxuICBpc0dyZWF0ZXI6IGZ1bmN0aW9uICh2YWx1ZSwgdGhhbikge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlID4gdGhhblxuICB9LFxuICBpc0xlc3M6IGZ1bmN0aW9uICh2YWx1ZSwgdGhhbikge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlIDwgdGhhblxuICB9LFxuICBpc0dyZWF0ZXJPckVxdWFsOiBmdW5jdGlvbiAodmFsdWUsIHRoYW4pIHtcbiAgICByZXR1cm4gbnVtYmVyLmlzTnVtYmVyKHZhbHVlKSAmJiB2YWx1ZSA+PSB0aGFuXG4gIH0sXG4gIGlzTGVzc09yRXF1YWw6IGZ1bmN0aW9uICh2YWx1ZSwgdGhhbikge1xuICAgIHJldHVybiBudW1iZXIuaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlIDw9IHRoYW5cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG51bWJlclxuIiwiJ3VzZSBzdHJpY3QnXG5jb25zdCBlcWVxZXEgPSByZXF1aXJlKCdkZWVwLWVxdWFsJylcblxuY29uc3Qgb2JqZWN0ID0ge1xuICBpc1NldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWRcbiAgfSxcbiAgaXNPYmplY3Q6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG4gIH0sXG4gIGlzQXJyYXk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5XG4gIH0sXG4gIGlzRW51bTogZnVuY3Rpb24gKHZhbHVlLCBfZW51bSkge1xuICAgIHRyeSB7XG4gICAgICBmb3IgKGxldCBrZXkgaW4gX2VudW0pIHtcbiAgICAgICAgaWYgKF9lbnVtW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH0sXG4gIC8qKlxuICAgKiBpbXBsaWNpdGx5IGNoZWNrIGlzT2JqZWN0XG4gICAqL1xuICBoYXNQcm9wZXJ0aWVzOiBmdW5jdGlvbiAodmFsdWUsIHByb3BlcnRpZXMpIHtcbiAgICBpZiAoIXByb3BlcnRpZXMpIHtcbiAgICAgIGNvbnNvbGUud2FybignY2hlY2t2JywgJ29iamVjdC5oYXNQcm9wZXJ0aWVzLCBtaXNzaW5nIHByb3BlcnRpZXMnKVxuICAgIH1cbiAgICBpZiAoIXByb3BlcnRpZXMgfHwgIW9iamVjdC5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdmFsdWUuaGFzT3duUHJvcGVydHkocHJvcGVydGllc1tpXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH0sXG4gIC8qKlxuICAgKiBAdG9kbyB1c2UgZGVlcC1zdHJpY3QtZXF1YWw/XG4gICAqL1xuICBpc0V4YWN0bHk6IGZ1bmN0aW9uICh2YWx1ZSwgdG8pIHtcbiAgICBpZiAodHlwZW9mIHRvICE9PSB0eXBlb2YgdmFsdWUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCAmJiB0byA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRvID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHRvLmNvbnN0cnVjdG9yLm5hbWUgIT09IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yICYmIHRvIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuY29kZSA9PT0gdG8uY29kZSB8fCB2YWx1ZS5jb2RlID09PSB0by5tZXNzYWdlIHx8IHZhbHVlLm1lc3NhZ2UgPT09IHRvLmNvZGVcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVxZXFlcSh2YWx1ZSwgdG8sIHtzdHJpY3Q6IHRydWV9KVxuICAgIH1cblxuICAgIC8vIHByaW1pdGl2ZXNcbiAgICByZXR1cm4gdmFsdWUgPT09IHRvXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvYmplY3RcbiIsIid1c2Ugc3RyaWN0J1xuXG5jb25zdCBzdHJpbmcgPSB7XG4gIGlzU3RyaW5nOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJ1xuICB9LFxuICBpc1Nob3J0ZXI6IGZ1bmN0aW9uICh2YWx1ZSwgdGhhbikge1xuICAgIHJldHVybiBzdHJpbmcuaXNTdHJpbmcodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA8IHRoYW5cbiAgfSxcbiAgaXNMb25nZXI6IGZ1bmN0aW9uICh2YWx1ZSwgdGhhbikge1xuICAgIHJldHVybiBzdHJpbmcuaXNTdHJpbmcodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IHRoYW5cbiAgfSxcbiAgaXNFbWFpbDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCAhc3RyaW5nLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHJldHVybiAoL15bXFx3XFwuLV0rQFtcXHdcXC4tXSskL2kpLnRlc3QodmFsdWUpXG4gIH0sXG4gIGlzUGluQ29kZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCAhc3RyaW5nLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiAoL15bXFxkXSskLykudGVzdCh2YWx1ZSlcbiAgfSxcbiAgaXNQaG9uZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCAhc3RyaW5nLmlzU3RyaW5nKHZhbHVlKSB8fCAhc3RyaW5nLmlzTG9uZ2VyKHZhbHVlLCAyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmICgoL15cXCs/W1xcZCAuXSskLykudGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bKyAuXS9nLCAnJykubGVuZ3RoID4gMlxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcbiAgaXNIZXg6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgfHwgIXN0cmluZy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gKC9eW1xcZGEtZl0rJC9pKS50ZXN0KHZhbHVlKVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RyaW5nXG4iLCJ2YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIG9iamVjdEtleXMgPSByZXF1aXJlKCcuL2xpYi9rZXlzLmpzJyk7XG52YXIgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2xpYi9pc19hcmd1bWVudHMuanMnKTtcblxudmFyIGRlZXBFcXVhbCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFjdHVhbCwgZXhwZWN0ZWQsIG9wdHMpIHtcbiAgaWYgKCFvcHRzKSBvcHRzID0ge307XG4gIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIHJldHVybiB0cnVlO1xuXG4gIH0gZWxzZSBpZiAoYWN0dWFsIGluc3RhbmNlb2YgRGF0ZSAmJiBleHBlY3RlZCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXG4gIC8vIDcuMy4gT3RoZXIgcGFpcnMgdGhhdCBkbyBub3QgYm90aCBwYXNzIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyxcbiAgLy8gZXF1aXZhbGVuY2UgaXMgZGV0ZXJtaW5lZCBieSA9PS5cbiAgfSBlbHNlIGlmICghYWN0dWFsIHx8ICFleHBlY3RlZCB8fCB0eXBlb2YgYWN0dWFsICE9ICdvYmplY3QnICYmIHR5cGVvZiBleHBlY3RlZCAhPSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBvcHRzLnN0cmljdCA/IGFjdHVhbCA9PT0gZXhwZWN0ZWQgOiBhY3R1YWwgPT0gZXhwZWN0ZWQ7XG5cbiAgLy8gNy40LiBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG4gIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG4gIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcbiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcbiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQsIG9wdHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkT3JOdWxsKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc0J1ZmZlciAoeCkge1xuICBpZiAoIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnIHx8IHR5cGVvZiB4Lmxlbmd0aCAhPT0gJ251bWJlcicpIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiB4LmNvcHkgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHguc2xpY2UgIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHgubGVuZ3RoID4gMCAmJiB0eXBlb2YgeFswXSAhPT0gJ251bWJlcicpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIG9iakVxdWl2KGEsIGIsIG9wdHMpIHtcbiAgdmFyIGksIGtleTtcbiAgaWYgKGlzVW5kZWZpbmVkT3JOdWxsKGEpIHx8IGlzVW5kZWZpbmVkT3JOdWxsKGIpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy8gYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LlxuICBpZiAoYS5wcm90b3R5cGUgIT09IGIucHJvdG90eXBlKSByZXR1cm4gZmFsc2U7XG4gIC8vfn5+SSd2ZSBtYW5hZ2VkIHRvIGJyZWFrIE9iamVjdC5rZXlzIHRocm91Z2ggc2NyZXd5IGFyZ3VtZW50cyBwYXNzaW5nLlxuICAvLyAgIENvbnZlcnRpbmcgdG8gYXJyYXkgc29sdmVzIHRoZSBwcm9ibGVtLlxuICBpZiAoaXNBcmd1bWVudHMoYSkpIHtcbiAgICBpZiAoIWlzQXJndW1lbnRzKGIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGEgPSBwU2xpY2UuY2FsbChhKTtcbiAgICBiID0gcFNsaWNlLmNhbGwoYik7XG4gICAgcmV0dXJuIGRlZXBFcXVhbChhLCBiLCBvcHRzKTtcbiAgfVxuICBpZiAoaXNCdWZmZXIoYSkpIHtcbiAgICBpZiAoIWlzQnVmZmVyKGIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdHJ5IHtcbiAgICB2YXIga2EgPSBvYmplY3RLZXlzKGEpLFxuICAgICAgICBrYiA9IG9iamVjdEtleXMoYik7XG4gIH0gY2F0Y2ggKGUpIHsvL2hhcHBlbnMgd2hlbiBvbmUgaXMgYSBzdHJpbmcgbGl0ZXJhbCBhbmQgdGhlIG90aGVyIGlzbid0XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoa2V5cyBpbmNvcnBvcmF0ZXNcbiAgLy8gaGFzT3duUHJvcGVydHkpXG4gIGlmIChrYS5sZW5ndGggIT0ga2IubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcbiAga2Euc29ydCgpO1xuICBrYi5zb3J0KCk7XG4gIC8vfn5+Y2hlYXAga2V5IHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoa2FbaV0gIT0ga2JbaV0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIWRlZXBFcXVhbChhW2tleV0sIGJba2V5XSwgb3B0cykpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHlwZW9mIGEgPT09IHR5cGVvZiBiO1xufVxuIiwidmFyIHN1cHBvcnRzQXJndW1lbnRzQ2xhc3MgPSAoZnVuY3Rpb24oKXtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHMpXG59KSgpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBzdXBwb3J0c0FyZ3VtZW50c0NsYXNzID8gc3VwcG9ydGVkIDogdW5zdXBwb3J0ZWQ7XG5cbmV4cG9ydHMuc3VwcG9ydGVkID0gc3VwcG9ydGVkO1xuZnVuY3Rpb24gc3VwcG9ydGVkKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG59O1xuXG5leHBvcnRzLnVuc3VwcG9ydGVkID0gdW5zdXBwb3J0ZWQ7XG5mdW5jdGlvbiB1bnN1cHBvcnRlZChvYmplY3Qpe1xuICByZXR1cm4gb2JqZWN0ICYmXG4gICAgdHlwZW9mIG9iamVjdCA9PSAnb2JqZWN0JyAmJlxuICAgIHR5cGVvZiBvYmplY3QubGVuZ3RoID09ICdudW1iZXInICYmXG4gICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ2NhbGxlZScpICYmXG4gICAgIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmplY3QsICdjYWxsZWUnKSB8fFxuICAgIGZhbHNlO1xufTtcbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gJ2Z1bmN0aW9uJ1xuICA/IE9iamVjdC5rZXlzIDogc2hpbTtcblxuZXhwb3J0cy5zaGltID0gc2hpbTtcbmZ1bmN0aW9uIHNoaW0gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgcmV0dXJuIGtleXM7XG59XG4iXX0="}